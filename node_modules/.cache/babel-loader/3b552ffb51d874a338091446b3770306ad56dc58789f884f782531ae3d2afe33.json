{"ast":null,"code":"import _objectSpread from\"/home/ash/Documents/RATHOLE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{IMAGES_DATA,DEBOUNCE_DELAY}from\"./constants\";import{generateValidPosition,parsePercentage,resetImageIncrement,debounce}from\"./utils\";// TODO:\n// update gallery\n// extend hero image + darken it\n// fix transition to about page\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Gallery=()=>{const[images,setImages]=useState([]);const[containerHeight,setContainerHeight]=useState(0);const[isLargeScreen,setIsLargeScreen]=useState(window.innerWidth>=1024);const[selectedImage,setSelectedImage]=useState(null);useEffect(()=>{const handleResizeLayoutCalculation=debounce(()=>{if(window.innerWidth>=1024){triggerLayoutRecalculation();}},DEBOUNCE_DELAY);const handleResizeLargeScreen=()=>{setIsLargeScreen(window.innerWidth>=1024);};window.addEventListener(\"resize\",handleResizeLayoutCalculation);window.addEventListener(\"resize\",handleResizeLargeScreen);// Initial trigger if the window width is already above 1024px\nif(window.innerWidth>=1024){triggerLayoutRecalculation();}// Cleanup the event listener when the component is unmounted\nreturn()=>{window.removeEventListener(\"resize\",handleResizeLayoutCalculation);window.removeEventListener(\"resize\",handleResizeLargeScreen);};},[]);const triggerLayoutRecalculation=()=>{let maxBottom=0;resetImageIncrement();const containerWidth=window.innerWidth;const positionedImages=[];for(const image of IMAGES_DATA){const newImageStyles=generateValidPosition(positionedImages,containerWidth);positionedImages.push(_objectSpread(_objectSpread({},image),newImageStyles));const imageBottom=parseInt(newImageStyles.top)+parsePercentage(newImageStyles.width,containerWidth);if(imageBottom>maxBottom){maxBottom=imageBottom;}}setImages(positionedImages);const extraHeight=400;setContainerHeight(maxBottom+extraHeight);};const closeModal=()=>setSelectedImage(null);return/*#__PURE__*/_jsxs(\"section\",{id:\"work\",className:\"relative py-20 px-6\",style:isLargeScreen?{height:\"\".concat(containerHeight,\"px\")}:{},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-full lg:block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4 lg:hidden\",children:IMAGES_DATA.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/\").concat(image.src),alt:image.alt,className:\"object-cover w-full h-auto border border-black rounded-lg shadow-md cursor-pointer\",onClick:()=>setSelectedImage(image)// Set selected image when clicked\n},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:block relative w-full h-full\",children:images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"hover:blur cursor-pointer\",style:{position:\"absolute\",top:image.top,left:image.left,width:image.width},children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/\").concat(image.src),alt:image.alt,className:\"object-cover border border-black shadow-lg rounded-md\",onClick:()=>setSelectedImage(image)// Set selected image when clicked\n},index),/*#__PURE__*/_jsx(\"p\",{className:\"-translate-y-7 translate-x-2\",children:image.about})]}))})]}),selectedImage&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50\",onClick:closeModal// Close modal when clicking on the overlay\n,children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/\").concat(selectedImage.src),alt:selectedImage.alt,style:{maxWidth:\"66vw\",// Max width to two-thirds of the viewport width\nmaxHeight:\"66vh\",// Max height to two-thirds of the viewport height\nwidth:\"auto\",// Maintain aspect ratio\nheight:\"auto\"// Maintain aspect ratio\n},className:\"rounded-lg shadow-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"absolute top-2 right-2 text-white bg-black rounded-full px-2 py-1\",children:\"X\"})]})})]});};export default Gallery;","map":{"version":3,"names":["React","useEffect","useState","IMAGES_DATA","DEBOUNCE_DELAY","generateValidPosition","parsePercentage","resetImageIncrement","debounce","jsx","_jsx","jsxs","_jsxs","Gallery","images","setImages","containerHeight","setContainerHeight","isLargeScreen","setIsLargeScreen","window","innerWidth","selectedImage","setSelectedImage","handleResizeLayoutCalculation","triggerLayoutRecalculation","handleResizeLargeScreen","addEventListener","removeEventListener","maxBottom","containerWidth","positionedImages","image","newImageStyles","push","_objectSpread","imageBottom","parseInt","top","width","extraHeight","closeModal","id","className","style","height","concat","children","map","index","src","process","env","PUBLIC_URL","alt","onClick","position","left","about","maxWidth","maxHeight"],"sources":["/home/ash/Documents/RATHOLE/src/components/Gallery/Gallery.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { IMAGES_DATA, DEBOUNCE_DELAY } from \"./constants\";\nimport { ImageData, StyledImageData } from \"./interfaces\";\nimport {\n  generateValidPosition,\n  parsePercentage,\n  resetImageIncrement,\n  debounce,\n} from \"./utils\";\n\n// TODO:\n// update gallery\n// extend hero image + darken it\n// fix transition to about page\n\n\nconst Gallery: React.FC = () => {\n  const [images, setImages] = useState<StyledImageData[]>([]);\n  const [containerHeight, setContainerHeight] = useState(0);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth >= 1024);\n  const [selectedImage, setSelectedImage] = useState<ImageData | null>(null);\n\n  useEffect(() => {\n    const handleResizeLayoutCalculation = debounce(() => {\n      if (window.innerWidth >= 1024) {\n        triggerLayoutRecalculation();\n      }\n    }, DEBOUNCE_DELAY);\n\n    const handleResizeLargeScreen = () => {\n      setIsLargeScreen(window.innerWidth >= 1024);\n    };\n\n    window.addEventListener(\"resize\", handleResizeLayoutCalculation);\n    window.addEventListener(\"resize\", handleResizeLargeScreen);\n\n    // Initial trigger if the window width is already above 1024px\n    if (window.innerWidth >= 1024) {\n      triggerLayoutRecalculation();\n    }\n\n    // Cleanup the event listener when the component is unmounted\n    return () => {\n      window.removeEventListener(\"resize\", handleResizeLayoutCalculation);\n      window.removeEventListener(\"resize\", handleResizeLargeScreen);\n    };\n  }, []);\n\n  const triggerLayoutRecalculation = () => {\n    let maxBottom = 0;\n    resetImageIncrement();\n    const containerWidth = window.innerWidth;\n    const positionedImages: StyledImageData[] = [];\n\n    for (const image of IMAGES_DATA) {\n      const newImageStyles = generateValidPosition(\n        positionedImages,\n        containerWidth\n      );\n      positionedImages.push({ ...image, ...newImageStyles });\n\n      const imageBottom =\n        parseInt(newImageStyles.top) +\n        parsePercentage(newImageStyles.width, containerWidth);\n      if (imageBottom > maxBottom) {\n        maxBottom = imageBottom;\n      }\n    }\n\n    setImages(positionedImages);\n\n    const extraHeight = 400;\n    setContainerHeight(maxBottom + extraHeight);\n  };\n\n  const closeModal = () => setSelectedImage(null);\n\n  return (\n    <section\n      id=\"work\"\n      className=\"relative py-20 px-6\"\n      style={isLargeScreen ? { height: `${containerHeight}px` } : {}}\n    >\n      {/* <h2 className=\"text-3xl font-bold text-center mb-8\">work</h2> */}\n      <div className=\"relative w-full h-full lg:block\">\n        {/* Mobile Grid Layout */}\n        <div className=\"grid grid-cols-2 gap-4 lg:hidden\">\n          {IMAGES_DATA.map((image, index) => (\n            <img\n              key={index}\n              src={`${process.env.PUBLIC_URL}/${image.src}`}\n              alt={image.alt}\n              className=\"object-cover w-full h-auto border border-black rounded-lg shadow-md cursor-pointer\"\n              onClick={() => setSelectedImage(image)} // Set selected image when clicked\n            />\n          ))}\n        </div>\n        {/* Desktop Dynamic Layout */}\n        <div className=\"hidden lg:block relative w-full h-full\">\n          {images.map((image, index) => (\n            <div\n            className=\"hover:blur cursor-pointer\"\n              style={{\n                position: \"absolute\",\n                top: image.top,\n                left: image.left,\n                width: image.width,\n              }}\n            >\n              <img\n                key={index}\n                src={`${process.env.PUBLIC_URL}/${image.src}`}\n                alt={image.alt}\n                className=\"object-cover border border-black shadow-lg rounded-md\"\n                onClick={() => setSelectedImage(image)} // Set selected image when clicked\n              />\n              <p className=\"-translate-y-7 translate-x-2\">{image.about}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Modal for Enlarged Image */}\n      {selectedImage && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50\"\n          onClick={closeModal} // Close modal when clicking on the overlay\n        >\n          <div className=\"relative\">\n            <img\n              src={`${process.env.PUBLIC_URL}/${selectedImage.src}`}\n              alt={selectedImage.alt}\n              style={{\n                maxWidth: \"66vw\", // Max width to two-thirds of the viewport width\n                maxHeight: \"66vh\", // Max height to two-thirds of the viewport height\n                width: \"auto\", // Maintain aspect ratio\n                height: \"auto\", // Maintain aspect ratio\n              }}\n              className=\"rounded-lg shadow-lg\"\n            />\n            <button\n              onClick={closeModal}\n              className=\"absolute top-2 right-2 text-white bg-black rounded-full px-2 py-1\"\n            >\n              X\n            </button>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default Gallery;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}